# 更新日志

## [1.2.0] - 2025-01-06

### 新增功能 ✨
- **套餐类型系统**：支持预设套餐类型（周卡、月卡、季卡、半年卡、年卡）
  - 生成激活码时可选择套餐类型，自动设置对应有效期
  - 支持自定义天数选项
  - 套餐类型信息存储在数据库中

### 用户体验优化 💫
- **智能过期时间显示**：
  - 未激活激活码显示"激活后生效"而不是"无限期"
  - 已激活激活码显示具体的过期时间
  - 套餐类型在激活码列表中清晰显示
- **增强的筛选功能**：
  - 激活码管理页面新增套餐类型筛选
  - 状态筛选改为"未激活"、"已使用"、"已过期"
  - 筛选选项动态显示实际存在的套餐类型
- **改进的导出功能**：
  - CSV导出包含套餐类型信息
  - 过期时间显示更加准确和直观

### 界面改进 🎨
- 生成激活码页面重新设计，支持套餐类型选择
- 激活码管理页面新增套餐类型列
- 筛选区域优化为2x2布局，提升操作体验

---

## [1.1.0] - 2025-01-06

### 重要变更 🔥
- **激活码过期时间逻辑优化**：激活码现在从激活时开始计算过期时间，而不是从创建时开始
  - 未激活的激活码不会自动过期
  - 激活码可以长期存储，不用担心因为没及时使用而过期
  - 只有在激活码被首次使用时，才开始计算过期倒计时

### 新增功能 ✨
- 在数据库中添加 `validDays` 字段，用于存储激活码的有效天数
- 管理后台智能显示过期时间信息：
  - 未激活：显示"X天有效期（激活后生效）"
  - 已激活：显示具体的过期时间
  - 无限期：显示"无限期"

### 改进功能 🔧
- 更新激活码验证逻辑，支持新的过期时间计算方式
- 更新统计数据计算，正确区分已过期和可用的激活码
- 更新清理过期激活码功能，按照新逻辑识别过期激活码
- 改进CSV导出功能，正确显示激活码状态和过期信息

### 兼容性 🔄
- **完全向后兼容**：现有的激活码数据会按照新逻辑重新计算
- 旧的 `expiresAt` 字段保留，用于兼容已激活的旧数据
- 系统会自动识别新旧数据格式，无需手动迁移

### 用户体验改进 💫
- 激活码购买后可以长期保存，不用担心过期
- 管理后台显示更加直观的过期时间信息
- 更符合用户的使用习惯和期望

### 技术细节 🔧
- 新增 `validDays` 字段到 `ActivationCode` 模型
- 更新 Prisma schema 和数据库结构
- 重构验证、统计、清理等核心逻辑
- 前端界面适配新的过期时间显示逻辑

---

## [1.0.0] - 2025-01-01

### 初始版本 🎉
- 激活码生成和管理功能
- 一机器一码验证机制
- 管理员后台系统
- IP白名单访问控制
- JWT会话管理
- 数据统计和导出功能 